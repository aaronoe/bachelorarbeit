\section{Introduction}
\label{sec:introduction}

\subsection{Motivation}
Many institutions around the world use central, automated matching schemes to assign agents to resources, based on their preferences. For instance, the National Resident Matching Program (NRMP) in the United States uses such a matching mechanism to pair graduating medical students to residency positions at hospitals every year \cite{Roth-NRMP}. There are different goals for these matchings, which can range from efficiency to fairness, and finding a mechanism that fulfills these goals is an important task to efficiently design such markets.
There are also many variants of matching problems, that include but are not limited to one-to-one, one-to-many and many-to-many matchings. The distribution of preferences need to be considered as well. For instance, in the hospital-residents problem, both the hospitals and residents supply preferences over the other set. Here it is important to consider if incomplete preference lists or ties should be allowed in the matchings. 

We will formally describe, examine and analyze the problem of one-to-many matching mechanisms with one-sided preferences. While there are many use-cases for this problem, we will focus on the problem of matching students to seminars, which is of high interest for many universities, who often require their students to participate in a seminar in order to obtain their degree. These students typically have a choice between a handful of different seminars; however, there are capacity constraints that make it hard to match all students to their first choice. Let us consider the following example: 100 students have to be assigned to one of six seminars, wherein each seminar has a capacity of 20 students. The students express their preferences by supplying a strict, meaning without ties, but possibly incomplete preference list of the six seminars. The goal for the school's administration now is to find an assignment of students to seminars that fulfills their requirements, which can range from assigning as many students as possible to being as fair as possible with the assignments. We will see that there is no obvious choice in picking an algorithm, since there are plenty of trade-offs between existing mechanisms that make it necessary to prioritize the requirements.  
What makes this problem harder is that the students' preferences are not necessarily equally distributed. Oftentimes a majority of students prefer one seminar which conflicts with other students getting their first choice. At the same time, it can occur that students go unmatched when their preference lists are short and primarily consist of seminars that have already reached full capacity.

The goal of this thesis is to formally model the one-to-many matching problem with one-sided preferences, while presenting different algorithms for finding matchings and finally to evaluate these algorithms using certain metrics that make sense in the one-to-many case. For the purpose of this thesis, we will use the example of student-seminar matching to analyze the problem, but it is important to note that it can just as well be generalized to any other one-to-many matching problem with incomplete preferences. Lastly, an interactive system will be developed, which will allow a school's administration to find a student-seminar matching using one of the presented algorithms. 

\subsection{Formal Definition}
The problem of assigning students to seminars can be described as a many-to-one matching, with a set of students $S:= \{s_1, s_2, ...,s_n\}$ and a set of seminars $T:= \{t_1, t_2, ..., t_m\}$. Every student $s_i \in S$ provides a strict, i.e. tie-less, preference order over a subset of $T$, and every seminar $t_j \in T$ has a capacity of $c_j$ students. The goal is to find a matching $M: S \rightarrow T$, that assigns students to one of their preferred seminars while respecting the capacity of the seminars. That means that for every seminar $t_j$ the following is satisfied: $|M^{-1}(t_j)| \leq c_j$. Using this definition we can describe the problem as a many-to-one matching with one-sided, incomplete preferences. In the case of students and seminars this means that one student is matched to one seminar, but one seminar is matched to a number of students, while only students express their preferences over the seminars. Later, we will discuss different optimality criteria, which can be used for defining an objective function for the problem.

\subsection{The Capacitated House Allocation Problem}\label{intro:cha}
Many economists and game theorists \cite{FEKETE2003219} have studied variants of the house allocation (HA) problem, wherein a set of indivisible items $H$, the houses, needs to be divided among a set $A$ of applicants. Each applicant may have a strict preference order over a subset of $H$. Formally this means that an instance $I$ of the problem consists of two disjoint sets, where $H := \{h_1, h_2, ..., h_n\}$ is the set of houses and $A := \{a_1, a_2, ..., a_m\}$ is the set of applicants. Each applicant $a_i \in A$ ranks a subset of the houses in $H$ using a preference list. The houses, on the other hand, do not have any preferences over applicants. A matching or assignment $M$ is map with $M: A \rightarrow H$, so that for every applicant $a_i$, the house $M(a_i)$ is on the applicants preference list \cite{SngThesis}. 

The house allocation problem is essentially an alias for a matching problem on bipartite graphs with one-sided preferences. There are many applications including matching clients to servers, professors to offices and also students to seminars. For the latter, some generalizations have to be made to the problem; specifically, one seminar should now be matched to more than one student, whereas the houses in HA are matched to one and only one applicant. In the literature, the latter variant of the problem is also referred to as the "Capacitated House Allocation Problem", denoted by CHA \cite{algorithmics}. The following chapters of this thesis will explore performance indicators and algorithms for finding matchings in the context of students and seminars, which is semantically equivalent to the CHA problem.

\subsection{Outline}
Given this problem definition, we will review the literature for optimality criteria and, based on that criteria, present algorithms that produce matchings with those characteristics. Many of those characteristics are quite obvious such as maximum-cardinality; however, we will also review terms such as "Pareto-efficiency" or "Popularity" that are commonly used in the context of market design and game theory. 
Using these criteria, we will review matching algorithms that solve the problem and then analyze and compare their runtime-complexity and optimality-properties. We will see that no algorithm is known that fulfills all desirable properties, which makes it necessary to understand the trade-offs and relationships between the algorithms. 

After completing a theoretical comparison of the algorithms, we will proceed to analyze matchings computed using real data to better understand the theoretical observations and trade-offs discussed before. Additionally, a web-interface will be presented that allows a university's administration to compute matchings according to their requirements using data that the system receives as input. Lastly, we will briefly explore extensions to the problem, such as the many-to-many case and finally summarize the results and make recommendations for the implementation and usage of the system, based on the current state of research on these matching mechanisms.

Therefore, the contribution of this thesis is a practically motivated survey and analysis of one-to-many matchings with one-sided preferences. We use the problem of matching students to seminars as a motivating example to understand commonly used algorithms and their performance characteristics, by performing both a theoretical and a practical analysis using real and synthesized data. This will conclude with recommendations for building such systems, based on the theoretical and practical results obtained in the previous sections. 

\subsection{Related Problems}
There are many related matching problems that can be classified as follows:
\begin{enumerate}
    \item Bipartite matching problems
    \begin{enumerate}
        \item One-sided preferences (see Section \ref{intro:cha})
        \begin{enumerate}
            \item One-to-one (e.g. House Allocation problem)
            \item \textbf{One-to-many (e.g. Capacitated House Allocation problem)} 
        \end{enumerate}
        \item Two-sided preferences
        \begin{enumerate}
            \item One-to-one (e.g. Stable-Marriage problem) (see Section \ref{intro:stable-marriage})
            \item One-to-many (e.g. Hospital-Residents problem) (see Sections \ref{intro:hospital-residents}, \ref{extensions:two-sided})
        \end{enumerate}
    \end{enumerate}
    \item Non-bipartite matching problems 
    \begin{enumerate}
        \item One-to-one (e.g. Stable-Roommates problem)
    \end{enumerate}
\end{enumerate}
Even though these problems have some differences, key mechanisms (Section \ref{chapter:algorithms}) and optimality criteria (Section \ref{sec:optimality}) used for them can nonetheless be similar or even identical. For instance, in the case of one-sided preferences, mechanisms for the one-to-one case can often easily be extended to the one-to-many case. It is also important to note that the problem can be extended to using incomplete preference lists and ties in the preference lists. In fact, real-world settings often necessitate at least incomplete preference lists, as students often want to classify a seminar as unacceptable. The following subsections will briefly present some of the listed matching problems and present their key results.  

\subsubsection{Stable Marriage Problem}\label{intro:stable-marriage}
The stable marriage problem was one of the first matching problems to be researched \cite{GaleShapleyOrig}, and consequently motivated further research in the field of matching under preferences.

The problem is stated as follows: A set of men $M$ and of women $W$ shall be matched one-to-one, where each men and women provide a complete strict-preference order over the agents of the other set. The deferred acceptance algorithm presented in Gale and Shapley's paper \cite{GaleShapleyOrig} finds a \emph{stable}, complete matching in polynomial time. Stability is defined as follows: given a women $w \in W$ and any man $m \in M$ that she was not matched to, $w$ does not prefer $m$ more than her current partner, and $m$ does not prefer $w$ more than his current partner. Therefore, in a stable matching, no pair of applicants $(m, w)$ should exist, so that $m$ and $w$ would benefit from leaving their assigned partner to be with each other.

The deferred acceptance algorithm uses one of the sets of applicants, for example the men, and proceeds by letting every man propose to their most preferred woman. The woman will tentatively accept the proposal, if she is not engaged at that point, or prefers the new proposal over her previous one. Then the algorithm repeats this process with men proposing to their most-preferred, but not yet proposed to woman until they are either matched or have no more women to propose to \cite{Gusfield}.

It is important to note that the algorithm produces different results if the women are the proposers: It has been shown that all possible executions of the algorithm with men as proposers yield the same stable matching. That matching is men-optimal, which means that every man has the best partner that he can have in any stable matching \cite{Gusfield}. Additionally, with men proposing, the produced matchings have also been shown to be women-pessimal, meaning that every woman is matched to the worst partner that she can have in any matching \cite{Gusfield}.

While the scenario of matching women to men like described is presumably not a common real-world occurrence, Gale and Shapley's paper inspired several new approaches to other similar problems.

\subsubsection{Hospitals/Residents Problem}\label{intro:hospital-residents}
A few years after the publication of Gale and Shapley's original paper, it was determined that the deferred acceptance mechanism was essentially the same mechanism used by the National Resident Matching Program (NRMP) in the United States to match graduating medical students to residency positions in hospitals \cite{Gusfield}. As a matter of fact, Gale and Shapley's paper described an algorithm for the so-called "college admissions problem"\cite{GaleShapleyOrig}, which is essentially the same problem. Just like in the stable-marriage problem, there is a solution that can be hospital-optimal or resident-pessimal. 

The problem can be described as finding a one-to-many matching with two-sided, incomplete, but strict preferences. Essentially, a hospital can offer multiple spots and both parties can mark entities from the other set as unacceptable by not including them in their preference lists \cite{RePEc:ris:nobelp:2012_005}. Therefore the main difference to the stable marriage problem is that one and only one of the sets allows their entities to have a capacity, i.e. accept more than one applicant. At the same time though, entities in both sets still express preferences, which makes this problem different from the CHA-problem (Section \ref{intro:cha}) where only entities from one set express preferences.

In reality, the problem solved by the NRMP is more complex, as it permits couples of residents to submit preferences together. It has been shown that a stable solution does not always exist and that finding one if it exists, or showing that it doesn't exist is NP-complete \cite{RONN1990285}. The revised algorithm used by the NRMP utilizes findings about stability and simple matching markets to find a good approximation, while minimizing opportunities for strategic manipulation, which was indeed possible before \cite{NBERw6963}.

\subsubsection{Assignment Problem}\label{intro_assignment}
The problem of matching students to seminars can also be defined as an assignment problem. The goal of the assignment problem is to find a minimum-weight, perfect matching in a bipartite graph. In this case the goal of the problem is, given the set of students $S$, seminars $T$, and a cost function $W: S \times T \rightarrow \mathbb{R}$, to find a map $M: S \rightarrow T$, which minimizes the following objective function:
$\sum_{s \in S} W(s, M(s))$.

One of the first algorithms used for solving this problem was the Hungarian algorithm by Munkres, which finds a minimum-weight matching in polynomial time \cite{Munkres}. 
Alternatively, the problem can be transformed into an instance of the minimum-cost flow problem to determine a minimum weight matching. Section \ref{algo:assignment} will further investigate using this algorithm for the problem of student-seminar matching.

\subsubsection{The Student-Project Allocation Problem}
A similar problem to the CHA or student-seminar assignment problem is the Student-Project Allocation problem (SPA). This problem considers three entities instead of two, which are students, projects and lecturers. In most variations of the problem, students have preferences over courses, while courses again have capacities. However, lecturers are also considered, where lecturers can have preferences over students and/or courses. Algorithmic approaches used for this problem are mostly based on the deferred acceptance mechanism and find stable matchings that can either favor the students or lecturers \cite{algorithmics}. 